<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <title>Tienda La Caserita</title>

    <link rel="stylesheet" href="Estilos/style_carrito.css">
    <link rel="stylesheet" href="Estilos/style-index.css">
</head>

<body>
    <script>
        // L√≥gica de protecci√≥n de sesi√≥n y control de historial
        // L√≥gica de protecci√≥n de sesi√≥n y control de historial
        // Se ejecuta al cargar y al volver con "Adelante/Atr√°s" (bfcache)
        window.onpageshow = function (event) {
            const userRole = localStorage.getItem('userRole') || sessionStorage.getItem('userRole');

            // 1. Si NO hay usuario, patada al login
            if (!userRole) {
                window.location.replace('index.html');
            } else {
                // 2. Si hay usuario, eliminar el login del historial
                // "Empujamos" el estado actual para que el bot√≥n Atr√°s no funcione
                history.pushState(null, document.title, location.href);
            }
        };

        // Si intentan ir atr√°s, los volvemos a empujar al frente
        window.onpopstate = function (event) {
            history.pushState(null, document.title, location.href);
        };
    </script>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <div class="mobile-sidebar" id="mobileSidebar">
        <div class="sidebar-header">
            <a href="#" class="sidebar-user-link">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                    <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span>Mi Cuenta</span>
            </a>
            <button class="sidebar-close" id="closeSidebar">√ó</button>
        </div>

        <div class="sidebar-content">
            <div class="sidebar-title">CATEGOR√çAS</div>

            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <div class="sidebar-icon">
                        <img src="https://media.istockphoto.com/id/505207430/es/foto/mariscos-frescos-y-bistecs-de-carne-de-res.jpg?s=612x612&w=0&k=20&c=UKxPwxvPUlDgh0U5byXg1RX1_egoBJOgUi9bii_jdRI="
                            alt="Carnes">
                    </div>
                    <span class="sidebar-text">Carnes y Aves</span>
                    <span class="sidebar-arrow">></span>
                </li>

                <li class="sidebar-item">
                    <div class="sidebar-icon">
                        <img
                            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSPAsc-Jmv3fltpgZv7XZVWj7WZXzbZm4TpMA&s">
                    </div>
                    <span class="sidebar-text">Bebidas</span>
                    <span class="sidebar-arrow">></span>
                </li>

                <li class="sidebar-item">
                    <div class="sidebar-icon">
                        <img
                            src="https://www.shutterstock.com/image-photo/fresh-raw-vegetables-fruits-260nw-2539811481.jpg">
                    </div>
                    <span class="sidebar-text">Verduras</span>
                    <span class="sidebar-arrow">></span>
                </li>
                <li class="sidebar-item">
                    <div class="sidebar-icon">
                        <img
                            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRt7luwWudEp8Nx0gcDLW4pkXjnHjl9f-FPDQ&s">
                    </div>
                    <span class="sidebar-text">Abarrotes</span>
                    <span class="sidebar-arrow">></span>
                </li>
                <li class="sidebar-item">
                    <div class="sidebar-icon">
                        <img
                            src="https://img.freepik.com/foto-gratis/productos-lacteos_114579-8756.jpg?semt=ais_hybrid&w=740&q=80">
                    </div>
                    <span class="sidebar-text">L√°cteos</span>
                    <span class="sidebar-arrow">></span>
                </li>
                <li class="sidebar-item">
                    <div class="sidebar-icon">
                        <img
                            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMKKxNBZcPiIu1Jr497k40gLZw2qSXShYFcQ&s">
                    </div>
                    <span class="sidebar-text">Panader√≠a</span>
                    <span class="sidebar-arrow">></span>
                </li>
                <li class="sidebar-item">
                    <div class="sidebar-icon">
                        <img
                            src="https://www.shutterstock.com/image-photo/set-various-frozen-products-260nw-2540473261.jpg">
                    </div>
                    <span class="sidebar-text">Congelados</span>
                    <span class="sidebar-arrow">></span>
                </li>
                <li class="sidebar-item">
                    <div class="sidebar-icon">
                        <img
                            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS52XtMxf4lhSEJNqSOaRGon-b_1e19KjvW1A&s">
                    </div>
                    <span class="sidebar-text">Limpieza</span>
                    <span class="sidebar-arrow">></span>
                </li>
                <li class="sidebar-item">
                    <div class="sidebar-icon">
                        <img
                            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRQturWP-7YADo5oPHdfM7eS_5PYCXYc6VEGQ&s">
                    </div>
                    <span class="sidebar-text">Dulces</span>
                    <span class="sidebar-arrow">></span>
                </li>
            </ul>

            <div class="sidebar-footer">
                <button id="btnLogout" class="btn-logout">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    Cerrar Sesi√≥n
                </button>
            </div>
        </div>
    </div>

    <header class="main-header">
        <nav class="navbar-container">
            <div class="navbar-content">
                <button class="btn-menu-mobile" id="openSidebar">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>

                <a href="home.html" class="header-logo" onclick="cerrarBusqueda(); return true;">
                    <span class="header-logo-icon">üè™</span>
                    <h1 class="header-titulo">Tienda "La Caserita"</h1>
                </a>

                <div class="search-container">
                    <div class="search-wrapper">
                        <span class="search-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                        </span>
                        <input type="text" name="busqueda" id="busqueda" placeholder="Buscar productos..."
                            class="search-input" autocomplete="off">
                        <button class="search-clear" id="searchClear" style="display: none;">√ó</button>

                        <!-- Dropdown de autocompletado -->
                        <div class="search-dropdown" id="searchDropdown">
                            <div class="search-dropdown-content">
                                <!-- Sugerencias de palabras -->
                                <div class="search-suggestions">
                                    <h4>Sugerencias</h4>
                                    <ul id="searchSuggestionsList"></ul>
                                </div>

                                <!-- Resultados r√°pidos -->
                                <div class="search-quick-results">
                                    <div class="search-quick-header">
                                        <span id="searchQuickLabel">Resultado para</span>
                                        <strong id="searchQuickTerm"></strong>
                                    </div>
                                    <div class="search-quick-products" id="searchQuickProducts"></div>
                                    <button class="search-view-all-btn" id="searchViewAllBtn">
                                        VER TODOS LOS PRODUCTOS
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="header-actions">
                    <button class="btn-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </button>

                    <button class="btn-user">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                        <span>Usuario</span>
                    </button>

                    <button class="btn-cart">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <span>Carrito (0)</span>
                    </button>

                    <button class="btn-cart-mobile">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="9" cy="21" r="1"></circle>
                            <circle cx="20" cy="21" r="1"></circle>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                        </svg>
                        <span class="badge">2</span>
                    </button>

                    <button class="btn-action hide-mobile" id="btn-logout"
                        style="background: #ef4444; border: 1px solid #dc2626;" title="Cerrar Sesi√≥n">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <div id="admin-bar">
        <div class="switch-container" id="editor-toggle-btn">
            <input type="checkbox" id="editSwitch" class="switch-input" style="display:none;">
            <div class="toggle-switch"></div>
            <span style="font-weight: 600;">Modo Editor</span>
        </div>

        <div class="admin-controls">
            <span id="editor-status" style="font-size: 0.9rem; opacity: 0.8;">Vista Previa</span>
            <button class="btn-admin-add">
                <span>+</span> Nuevo Producto Global
            </button>
        </div>
    </div>

    <main>
        <!-- SECCI√ìN DE RESULTADOS DE B√öSQUEDA -->
        <section class="search-results-section" id="searchResultsSection" style="display: none;">
            <div class="search-results-header">
                <div class="search-results-breadcrumb">
                    <a href="#" onclick="cerrarBusqueda()">Inicio</a>
                    <span>‚Ä∫</span>
                    <span id="searchResultsTerm">b√∫squeda</span>
                </div>
                <div class="search-results-title">
                    <h2>Resultado de b√∫squeda: <span id="searchResultsCount">0</span> PRODUCTOS</h2>
                </div>
            </div>

            <div class="search-results-grid" id="searchResultsGrid">
                <!-- Productos se llenan din√°micamente -->
            </div>

            <div class="search-results-footer" id="searchResultsFooter" style="display: none;">
                <div class="search-results-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="searchProgressFill"></div>
                    </div>
                    <span id="searchShowingText">Mostrando 60 de 100</span>
                </div>
                <button class="search-show-more-btn" id="searchShowMoreBtn">MOSTRAR M√ÅS</button>
            </div>
        </section>

        <!-- Contenido principal (se oculta al buscar) -->
        <div id="mainContent">
            <section class="hero-section" id="heroSlider">
                <div class="hero-slides">
                    <!-- Slide 1: Principal -->
                    <div class="hero-slide active" data-bg="#0d5f6e">
                        <div class="hero-content">
                            <span class="hero-tag">üè™ Tu tienda de siempre</span>
                            <h1>Llevamos la tienda a tu puerta</h1>
                            <p>Productos frescos y de primera necesidad con entrega r√°pida.</p>
                            <button class="cta-button">COMPRAR AHORA</button>
                        </div>
                    </div>
                    <!-- Slide 2: Ofertas -->
                    <div class="hero-slide" data-bg="#dc2626">
                        <div class="hero-content">
                            <span class="hero-tag">üî• OFERTAS DEL D√çA</span>
                            <h1>Hasta 30% de descuento</h1>
                            <p>En carnes, l√°cteos y productos seleccionados. ¬°Solo por hoy!</p>
                            <button class="cta-button">VER OFERTAS</button>
                        </div>
                    </div>
                    <!-- Slide 3: Productos Nuevos -->
                    <div class="hero-slide" data-bg="#059669">
                        <div class="hero-content">
                            <span class="hero-tag">‚ú® RECI√âN LLEGADOS</span>
                            <h1>Nuevos productos frescos</h1>
                            <p>Descubre las novedades de la semana en Sugerencias del D√≠a.</p>
                            <button class="cta-button">EXPLORAR</button>
                        </div>
                    </div>
                    <!-- Slide 4: Env√≠o -->
                    <div class="hero-slide" data-bg="#7c3aed">
                        <div class="hero-content">
                            <span class="hero-tag">üöö DELIVERY GRATIS</span>
                            <h1>Env√≠o gratis en compras +S/50</h1>
                            <p>Llena tu carrito y nosotros lo llevamos sin costo adicional.</p>
                            <button class="cta-button">APROVECHA AHORA</button>
                        </div>
                    </div>
                </div>
                <div class="hero-dots">
                    <button class="hero-dot active" data-slide="0"></button>
                    <button class="hero-dot" data-slide="1"></button>
                    <button class="hero-dot" data-slide="2"></button>
                    <button class="hero-dot" data-slide="3"></button>
                </div>
                <button class="hero-arrow hero-prev">‚ùÆ</button>
                <button class="hero-arrow hero-next">‚ùØ</button>
            </section>

            <section class="sugerencias-section">
                <h2>Sugerencias del D√≠a:</h2>

                <div class="sugerencias-container-bg">
                    <button type="button" class="nav-arrow nav-arrow-sug" id="sugLeft"
                        style="left: -20px;">&lt;</button>

                    <div id="sugerenciasGrid">
                        <!-- Contenido generado din√°micamente por app.js -->
                    </div>
                    <button type="button" class="nav-arrow nav-arrow-sug" id="sugRight" style="right: -20px;">></button>
                </div>
            </section>

            <section class="seccion-categorias">
                <h2>Categorias:</h2>

                <div class="wrapper-scroll">
                    <button class="nav-arrow" id="scrollLeft">&lt;</button>

                    <div class="categorias-container" id="categoriaGrid">
                        <!-- Contenido generado din√°micamente por app.js -->
                    </div>

                    <button class="nav-arrow" id="scrollRight">></button>
                </div>
            </section>

            <section class="momentos-section" id="momentosSection">
                <div class="sugerencias-filtros">
                    <button class="filtro-pill active" data-target="desayuno">Para el desayuno</button>
                    <button class="filtro-pill" data-target="almuerzo">Para el almuerzo</button>
                    <button class="filtro-pill" data-target="lonchera">Para la lonchera</button>
                    <button class="filtro-pill" data-target="cena">Para la cena</button>
                </div>

                <!-- Contenido din√°mico de momentos del d√≠a -->
                <div id="momentosContent">
                    <!-- Se llenar√° din√°micamente con JavaScript -->
                </div>
            </section>

            <!-- Secci√≥n para mostrar productos de subcategor√≠a (Ver todo) -->
            <section class="subcategoria-section" id="subcategoriaSection" style="display: none;">
                <div id="subcategoriaContent">
                    <!-- Se llenar√° din√°micamente con JavaScript -->
                </div>
            </section>

            <section class="ubicacion-section">
                <h2>Encuentranos:</h2>

                <div class="ubicacion-card">
                    <div class="info-lista">

                        <div class="info-item">
                            <div class="info-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                                    <polyline points="9 22 9 12 15 12 15 22" />
                                </svg>
                            </div>
                            <div class="info-text">
                                <h4>Direcci√≥n:</h4>
                                <p>Av. Grau #156, Chiclayo - Per√∫</p>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10" />
                                    <polyline points="12 6 12 12 16 14" />
                                </svg>
                            </div>
                            <div class="info-text">
                                <h4>Direcci√≥n:</h4>
                                <p>Lun-Dom: 6:00 AM - 10:30 PM</p>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" />
                                </svg>
                            </div>
                            <div class="info-text">
                                <h4>Telefono:</h4>
                                <p>074 618 / 936 725 640</p>
                            </div>
                        </div>

                        <div class="info-item">
                            <div class="info-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                                </svg>
                            </div>
                            <div class="info-text">
                                <h4>WhatsApp:</h4>
                                <p>Escribenos al privado para conocer m√°s.</p>
                            </div>
                        </div>
                    </div>

                    <div class="mapa-container">
                        <div class="mapa-frame">
                            <iframe
                                src="https://www.google.com/maps/embed?pb=!1m24!1m12!1m3!1d247.6077853266815!2d-79.84990417957307!3d-6.803323642909022!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m9!3e6!4m3!3m2!1d-6.803271!2d-79.8499216!4m3!3m2!1d-6.8032696999999995!2d-79.8499223!5e0!3m2!1ses-419!2spe!4v1763996820134!5m2!1ses-419!2spe"
                                width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy"
                                referrerpolicy="no-referrer-when-downgrade"></iframe>
                        </div>

                        <a href="https://maps.app.goo.gl/kbdAPLCaNXfiYPW48" target="_blank" class="btn-como-llegar">
                            Como llegar
                        </a>
                    </div>
                </div>
            </section>

            <section class="app-section">
                <div class="app-content">
                    <h3>Conoce los beneficios de nuestra</h3>
                    <h4>APP Tienda "La Caserita"</h4>
                </div>
                <button class="btn-app">Descargalo aqu√≠</button>
            </section>
    </main>

    <div class="cart-overlay" id="cartOverlay"></div>

    <div class="cart-sidebar" id="cartSidebar">

        <div class="cart-header">
            <h2>Carrito</h2>
            <button class="btn-close-cart" id="closeCart">√ó</button>
        </div>

        <div class="cart-content" id="cartContent">
            <div
                style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; color:#999;">
                <p>Tu carrito est√° vac√≠o</p>
            </div>
        </div>

        <div class="cart-footer">
            <div class="cart-summary">
                <div class="summary-row">
                    <span>Subtotal</span>
                    <span id="cart-subtotal">S/ 0.00</span>
                </div>
                <div class="summary-row total">
                    <span>Total</span>
                    <span id="cart-total">S/ 0.00</span>
                </div>
            </div>
            <button class="btn-checkout" id="btnIrPagar">VER CARRITO</button>
        </div>
    </div>

    <div class="modal-overlay" id="modalProducto">
        <div class="modal-content modal-wide">
            <div class="modal-header">
                <h3>üì¶ Nuevo Producto</h3>
                <button class="btn-close-modal" onclick="cerrarModal('modalProducto')">√ó</button>
            </div>
            <form id="formNuevoProducto" class="form-grid">
                <!-- Fila 1: Nombre (ancho completo) -->
                <div class="form-group form-full">
                    <label>Nombre del Producto</label>
                    <input type="text" id="prodNombre" required placeholder="Ej. Lomo Saltado">
                </div>

                <!-- Fila 2: Precio y Stock -->
                <div class="form-group">
                    <label>Precio (S/)</label>
                    <input type="number" step="0.10" id="prodPrecio" required placeholder="0.00">
                </div>
                <div class="form-group">
                    <label>Stock Inicial</label>
                    <input type="number" id="prodStock" required placeholder="10">
                </div>

                <!-- Fila 3: Categor√≠a y Subcategor√≠a -->
                <div class="form-group">
                    <label>Categor√≠a</label>
                    <select id="prodCategoria">
                        <option value="carnes">Carnes y Aves</option>
                        <option value="verduras">Verduras</option>
                        <option value="abarrotes">Abarrotes</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Subcategor√≠a</label>
                    <select id="prodSubcategoria">
                        <option value="">-- Seleccionar --</option>
                        <option value="carnes_aves">Carnes y Aves</option>
                        <option value="verduras_frescas">Verduras Frescas</option>
                        <option value="avenas_cereales">Avenas y Cereales</option>
                        <option value="panaderia_untables">Panader√≠a y Untables</option>
                        <option value="abarrotes_almuerzo">Abarrotes Almuerzo</option>
                        <option value="bebidas_almuerzo">Bebidas Almuerzo</option>
                        <option value="jugos_galletas">Jugos y Galletas</option>
                        <option value="infusiones_ligeros">Infusiones y Ligeros</option>
                    </select>
                </div>

                <!-- Fila 4: Momento y URL Imagen -->
                <div class="form-group">
                    <label>Momento del d√≠a</label>
                    <select id="prodMomento">
                        <option value="desayuno">üåÖ Desayuno</option>
                        <option value="almuerzo" selected>üçΩÔ∏è Almuerzo</option>
                        <option value="lonchera">üéí Lonchera</option>
                        <option value="cena">üåô Cena</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>URL de Imagen</label>
                    <input type="text" id="prodImg" placeholder="https://...">
                </div>

                <!-- Toggle para Sugerencias del D√≠a (ancho completo) -->
                <div class="form-group form-full toggle-group">
                    <div class="toggle-row">
                        <label class="toggle-label">
                            <span class="toggle-icon">‚≠ê</span>
                            Agregar a "Sugerencias del D√≠a"
                        </label>
                        <label class="toggle-switch-container">
                            <input type="checkbox" id="prodEsSugerencia" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Footer con botones -->
                <div class="modal-footer form-full">
                    <button type="button" class="btn-cancel" onclick="cerrarModal('modalProducto')">Cancelar</button>
                    <button type="submit" class="btn-save">üíæ Guardar Producto</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="modalCategoria">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Nueva Categor√≠a</h3>
                <button class="btn-close-modal" onclick="cerrarModal('modalCategoria')">√ó</button>
            </div>
            <form id="formNuevaCategoria">
                <div class="form-group">
                    <label>Nombre de Categor√≠a:</label>
                    <input type="text" id="catNombre" required placeholder="Ej. Mascotas">
                </div>
                <div class="form-group">
                    <label>ID √∫nico (sin espacios):</label>
                    <input type="text" id="catId" required placeholder="Ej. mascotas">
                </div>
                <div class="form-group">
                    <label>Descripci√≥n corta:</label>
                    <input type="text" id="catDesc" placeholder="Ej. Alimento para mascotas">
                </div>
                <div class="form-group">
                    <label>URL de Icono/Imagen:</label>
                    <input type="text" id="catImg" placeholder="https://...">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-cancel" onclick="cerrarModal('modalCategoria')">Cancelar</button>
                    <button type="submit" class="btn-save">Guardar Categor√≠a</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL CONFIRMACION ELIMINAR -->
    <div class="modal-overlay" id="deleteConfirmModal">
        <div class="modal-content" style="text-align: center; max-width: 380px;">
            <div style="font-size: 50px; margin-bottom: 15px;">üóëÔ∏è</div>
            <h3 id="deleteTitle" style="margin-bottom: 10px;">¬øEliminar producto?</h3>
            <p style="color: #666; margin-bottom: 25px;">Esta acci√≥n no se puede deshacer.</p>
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button class="btn-cancel" onclick="cerrarModal('deleteConfirmModal')">Cancelar</button>
                <button class="btn-save" id="btnConfirmDelete" style="background: #ef4444;">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- MODAL ALERTAS CUSTOM -->
    <div class="modal-overlay" id="alertModal">
        <div class="modal-content" style="text-align: center; max-width: 380px;">
            <div id="alertIcon" style="font-size: 50px; margin-bottom: 15px;">‚ö†Ô∏è</div>
            <h3 id="alertTitle" style="margin-bottom: 10px;">Mensaje</h3>
            <p id="alertMessage" style="color: #666; margin-bottom: 25px;"></p>
        </div>
    </div>

    <!-- MODAL DETALLE DE PRODUCTO (Estilo Rappi) -->
    <div class="modal-overlay product-detail-overlay" id="modalDetalleProducto">
        <div class="product-detail-modal">
            <!-- Bot√≥n cerrar -->
            <button class="product-detail-close" onclick="cerrarModal('modalDetalleProducto')">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <!-- Contenido scrolleable -->
            <div class="product-detail-body">
                <!-- Secci√≥n principal: Imagen + Info -->
                <div class="product-detail-main">
                    <div class="product-detail-image">
                        <img id="detailProductImage" src="Imagenes/producto-placeholder.png" alt="Producto">
                    </div>
                    <div class="product-detail-info">
                        <h1 id="detailProductTitle" class="product-detail-title">Nombre del Producto</h1>

                        <div class="product-detail-pricing">
                            <span id="detailProductPrice" class="product-detail-price">S/ 0.00</span>
                            <span id="detailProductOldPrice" class="product-detail-old-price"></span>
                            <span id="detailProductDiscount" class="product-detail-discount"></span>
                        </div>

                        <p id="detailProductUnit" class="product-detail-unit"></p>

                        <div class="product-detail-stock-option">
                            <label>Si mi producto est√° agotado</label>
                            <select id="detailStockOption">
                                <option value="no_contactar">Si no contesto, elijan por m√≠</option>
                                <option value="contactar">Contactarme antes de reemplazar</option>
                                <option value="no_reemplazar">No reemplazar</option>
                            </select>
                        </div>

                        <div class="product-detail-description">
                            <h3>Informaci√≥n del producto</h3>
                            <p id="detailProductDescription">Descripci√≥n del producto...</p>
                        </div>
                    </div>
                </div>

                <!-- Productos relacionados -->
                <div class="product-detail-section">
                    <div class="product-detail-section-header">
                        <h3>Productos relacionados</h3>
                        <div class="carousel-nav">
                            <button class="carousel-btn" onclick="scrollRelated(-1)">‚ùÆ</button>
                            <button class="carousel-btn" onclick="scrollRelated(1)">‚ùØ</button>
                        </div>
                    </div>
                    <div class="product-detail-carousel" id="relatedProductsCarousel">
                        <!-- Productos relacionados se llenan din√°micamente -->
                    </div>
                </div>

                <!-- Productos complementarios -->
                <div class="product-detail-section">
                    <div class="product-detail-section-header">
                        <h3>Productos complementarios</h3>
                        <div class="carousel-nav">
                            <button class="carousel-btn" onclick="scrollComplementary(-1)">‚ùÆ</button>
                            <button class="carousel-btn" onclick="scrollComplementary(1)">‚ùØ</button>
                        </div>
                    </div>
                    <div class="product-detail-carousel" id="complementaryProductsCarousel">
                        <!-- Productos complementarios se llenan din√°micamente -->
                    </div>
                </div>
            </div>

            <!-- Footer fijo con controles -->
            <div class="product-detail-footer">
                <button class="detail-delete-btn" onclick="cerrarModal('modalDetalleProducto')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="m19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                </button>
                <div class="detail-quantity-control">
                    <button class="qty-btn" onclick="cambiarCantidadDetalle(-1)">‚àí</button>
                    <span id="detailQuantity">1</span>
                    <button class="qty-btn" onclick="cambiarCantidadDetalle(1)">+</button>
                </div>
                <button class="detail-add-btn" onclick="agregarDesdeDetalle()">
                    <span>Agregar</span>
                    <span id="detailSubtotal" class="detail-subtotal">Subtotal: S/ 0.00</span>
                </button>
            </div>
        </div>
    </div>
    </div><!-- Fin mainContent -->

    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>La Caserita</h3>
                <p>Tu tienda de confianza, ahora digital. Productos frescos y de calidad directamente a la puerta de tu
                    hogar.</p>
            </div>

            <div class="footer-column">
                <h3>Nuestra Empresa</h3>
                <ul class="footer-links">
                    <li><a href="#">Inicio</a></li>
                    <li><a href="#">Sobre Nosotros</a></li>
                    <li><a href="#">Productos</a></li>
                    <li><a href="#">Contacto</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3>Nuestra Empresa</h3>
                <ul class="footer-links">
                    <li><a href="#">Reclamos</a></li>
                    <li><a href="#">T√©rminos y Condiciones</a></li>
                    <li><a href="#">Pol√≠tica de Privacidad</a></li>
                    <li><a href="#">Trabaja con Nosotros</a></li>
                    <li><a href="#">Preguntas Frecuentes</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3>S√≠guenos</h3>
                <div class="social-links">
                    <a href="#" class="social-icon">F</a>
                    <a href="#" class="social-icon">I</a>
                    <a href="#" class="social-icon">L</a>
                </div>
            </div>
        </div>

        <div class="copyright">
            ¬© 2025 Tienda "La Caserita". Todos los derechos reservados.
        </div>
    </footer>

    <script src="Scripts/app.js"></script>

    <script>
        // Script complementario para funcionalidades espec√≠ficas de home.html
        // La l√≥gica principal est√° en Scripts/app.js
        $(document).ready(function () {

            // --- FILTROS DE MOMENTOS DEL D√çA ---
            // Esta funcionalidad es √∫nica de home.html
            const scrollAmount = 250;

            $('.filtro-pill').click(function () {
                $('.filtro-pill').removeClass('active');
                $(this).addClass('active');
                const target = $(this).data('target');
                if (target) {
                    $('.tab-content').removeClass('active-content');
                    $('#content-' + target).addClass('active-content');
                }
            });

            // --- SCROLL DE LOS CARRUSELES METRO ---
            // Scroll para las secciones de momentos del d√≠a (desayuno, almuerzo, etc.)
            $('.btn-scroll-right').click(function () {
                const $grid = $(this).siblings('.metro-grid');
                if ($grid.length) {
                    const maxScroll = $grid[0].scrollWidth - $grid[0].clientWidth;
                    if ($grid.scrollLeft() >= maxScroll - 5) {
                        $grid.animate({ scrollLeft: 0 }, 500);
                    } else {
                        $grid.animate({ scrollLeft: "+=" + scrollAmount }, 300);
                    }
                }
            });

            $('.btn-scroll-left').click(function () {
                const $grid = $(this).siblings('.metro-grid');
                if ($grid.length) {
                    if ($grid.scrollLeft() <= 0) {
                        $grid.animate({ scrollLeft: $grid[0].scrollWidth }, 500);
                    } else {
                        $grid.animate({ scrollLeft: "-=" + scrollAmount }, 300);
                    }
                }
            });

            // --- EFECTO CENTRADO EN CATEGOR√çAS ---
            // Solo centra la categor√≠a seleccionada (la l√≥gica de active est√° en app.js)
            const $catGrid = $('#categoriaGrid');
            $(document).on('click', '.categoria-card', function (e) {
                const targetScroll = $catGrid.scrollLeft() + ($(this).offset().left - $catGrid.offset().left) - ($catGrid.width() / 2) + ($(this).width() / 2);
                $catGrid.animate({ scrollLeft: targetScroll }, 500);
            });
        });
    </script>
</body>

</html>